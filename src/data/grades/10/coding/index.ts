import { Subject, SubjectData, GameLesson } from '../../../types'

const lessons: SubjectData = {
  id: 'coding',
  title: 'Программирование',
  icon: 'Code',
  color: '#10B981',
  topics: [
    'Продвинутые алгоритмы',
    'Парадигмы программирования',
    'Базы данных',
    'Сетевое программирование',
    'Машинное обучение',
    'Безопасность',
    'Архитектура ПО',
    'Итоговый проект'
  ],
  detailedTopics: [
    {
      title: 'Продвинутые алгоритмы',
      lessons: [
        {
          title: 'Динамическое программирование',
          content: 'Динамическое программирование — метод решения задач путём разбиения на подзадачи. Принцип оптимальности Беллмана: оптимальное решение содержит оптимальные решения подзадач. Мемоизация — запоминание результатов подзадач. Примеры: числа Фибоначчи, задача о рюкзаке, редакционное расстояние. Сложность снижается с экспоненциальной до полиномиальной.',
          practice: 'Реализуйте алгоритм поиска числа Фибоначчи через динамическое программирование.'
        },
        {
          title: 'Графовые алгоритмы',
          content: 'Графы моделируют связи между объектами. DFS (поиск в глубину) — рекурсивный обход. BFS (поиск в ширину) — послойный обход. Алгоритм Дейкстры — кратчайший путь во взвешенном графе. Алгоритм Флойда-Уоршелла — все пары кратчайших путей. Топологическая сортировка для ориентированных ациклических графов.',
          practice: 'Реализуйте алгоритм Дейкстры для поиска кратчайшего пути.'
        },
        {
          title: 'Алгоритмы на строках',
          content: 'Поиск подстроки — важная задача обработки текста. Наивный алгоритм O(n×m). Алгоритм Кнута-Морриса-Пратта O(n+m) с префикс-функцией. Алгоритм Бойера-Мура эффективен на практике. Z-функция — альтернативный подход. Регулярные выражения — мощный инструмент поиска паттернов.',
          practice: 'Реализуйте алгоритм КМП для поиска подстроки.'
        },
        {
          title: 'Хеширование',
          content: 'Хеш-функция преобразует данные в число фиксированного размера. Свойства: детерминированность, равномерность, быстрота. Коллизии — одинаковые хеши для разных данных. Методы разрешения: цепочки, открытая адресация. Хеш-таблицы обеспечивают O(1) для поиска, вставки, удаления в среднем. Криптографические хеши: SHA, MD5.',
          practice: 'Реализуйте хеш-таблицу с разрешением коллизий методом цепочек.'
        }
      ]
    },
    {
      title: 'Парадигмы программирования',
      lessons: [
        {
          title: 'Функциональное программирование',
          content: 'Функциональное программирование основано на математических функциях. Чистые функции — без побочных эффектов. Иммутабельность — данные не изменяются. Функции высшего порядка принимают или возвращают функции. map, filter, reduce — основные операции. Лямбда-выражения — анонимные функции. Рекурсия вместо циклов.',
          practice: 'Перепишите цикл суммирования списка через reduce.'
        },
        {
          title: 'Замыкания и декораторы',
          content: 'Замыкание — функция, запоминающая своё лексическое окружение. Внутренняя функция имеет доступ к переменным внешней. Декораторы — функции, модифицирующие поведение других функций. @decorator — синтаксический сахар. Декораторы с аргументами. Применение: логирование, кэширование, проверка прав.',
          practice: 'Напишите декоратор для измерения времени выполнения функции.'
        },
        {
          title: 'Генераторы и итераторы',
          content: 'Итератор — объект, возвращающий элементы по одному. Протокол итератора: __iter__, __next__. Генераторы — функции с yield. yield приостанавливает выполнение, сохраняя состояние. Генераторные выражения: (x for x in iterable). Ленивые вычисления — элементы генерируются по требованию. Экономия памяти для больших последовательностей.',
          practice: 'Напишите генератор чисел Фибоначчи.'
        },
        {
          title: 'Асинхронное программирование',
          content: 'Асинхронность — выполнение задач без ожидания завершения. async/await — синтаксис асинхронных функций. Событийный цикл (event loop) управляет задачами. Корутины — функции, которые можно приостанавливать. asyncio — библиотека для асинхронного программирования в Python. Асинхронность эффективна для I/O-операций.',
          practice: 'Напишите асинхронную функцию для загрузки нескольких веб-страниц.'
        }
      ]
    },
    {
      title: 'Базы данных',
      lessons: [
        {
          title: 'Реляционные базы данных',
          content: 'Реляционная модель: таблицы, строки, столбцы. Первичный ключ однозначно идентифицирует строку. Внешний ключ — ссылка на первичный ключ другой таблицы. Нормализация — устранение избыточности. 1НФ, 2НФ, 3НФ — нормальные формы. JOIN — объединение таблиц. INNER, LEFT, RIGHT, FULL JOIN.',
          practice: 'Спроектируйте базу данных для интернет-магазина.'
        },
        {
          title: 'SQL: сложные запросы',
          content: 'Подзапросы — запросы внутри запросов. EXISTS, IN, ANY, ALL. GROUP BY — группировка, HAVING — фильтрация групп. Агрегатные функции: COUNT, SUM, AVG, MIN, MAX. WINDOW функции: ROW_NUMBER, RANK, LEAD, LAG. Транзакции: BEGIN, COMMIT, ROLLBACK. ACID — свойства транзакций.',
          practice: 'Напишите запрос для расчёта средней зарплаты по отделам.'
        },
        {
          title: 'NoSQL базы данных',
          content: 'NoSQL — базы данных без фиксированной схемы. Документоориентированные: MongoDB, CouchDB. Ключ-значение: Redis, Memcached. Колоночные: Cassandra, HBase. Графовые: Neo4j. CAP-теорема: согласованность, доступность, устойчивость к разделению. NoSQL масштабируется горизонтально.',
          practice: 'Сравните SQL и NoSQL для хранения данных социальных сетей.'
        },
        {
          title: 'ORM: SQLAlchemy',
          content: 'ORM — объектно-реляционное отображение. Классы Python отображаются на таблицы. SQLAlchemy: декларативное описание моделей. Сессия — управление транзакциями. Query API: filter, order_by, limit. Связи: one-to-many, many-to-many. Миграции: Alembic для управления версиями схемы.',
          practice: 'Создайте модели ORM для блога: пользователи, посты, комментарии.'
        }
      ]
    },
    {
      title: 'Сетевое программирование',
      lessons: [
        {
          title: 'Протоколы TCP/IP',
          content: 'Модель TCP/IP: прикладной, транспортный, сетевой, канальный. IP — адресация и маршрутизация. TCP — надёжная доставка, установление соединения. UDP — быстрая ненадёжная доставка. Порты — идентификаторы приложений. HTTP — протокол веба. HTTPS — шифрование через TLS/SSL.',
          practice: 'Объясните разницу между TCP и UDP на примерах.'
        },
        {
          title: 'Сокеты в Python',
          content: 'Сокет — конечная точка сетевого соединения. socket() создаёт сокет. bind() привязывает к адресу и порту. listen() переводит в режим ожидания. accept() принимает соединение. connect() подключается к серверу. send() и recv() передают данные. Закрытие сокета: close().',
          practice: 'Напишите простой чат-сервер на сокетах.'
        },
        {
          title: 'HTTP и REST API',
          content: 'HTTP-методы: GET, POST, PUT, DELETE, PATCH. Статус-коды: 2xx — успех, 3xx — перенаправление, 4xx — ошибка клиента, 5xx — ошибка сервера. Заголовки: Content-Type, Authorization, Cookie. REST — архитектурный стиль. Ресурсы идентифицируются URL. Stateless — сервер не хранит состояние.',
          practice: 'Спроектируйте REST API для блога.'
        },
        {
          title: 'Веб-фреймворки: Django',
          content: 'Django — полнофункциональный веб-фреймворк. MVT: Model-View-Template. ORM для работы с базой данных. Админка автоматически генерируется. Маршрутизация: urls.py. Представления: views.py. Шаблоны: Django Templates. Формы и валидация. Middleware для обработки запросов.',
          practice: 'Создайте Django-проект с одной моделью и CRUD-операциями.'
        }
      ]
    },
    {
      title: 'Машинное обучение',
      lessons: [
        {
          title: 'Введение в машинное обучение',
          content: 'Машинное обучение — обучение компьютеров на данных. Типы: обучение с учителем, без учителя, с подкреплением. Признаки — характеристики объектов. Метки — правильные ответы. Датасет делится на обучающую и тестовую выборки. Библиотеки: scikit-learn, TensorFlow, PyTorch.',
          practice: 'Приведите примеры задач обучения с учителем и без учителя.'
        },
        {
          title: 'Линейная регрессия',
          content: 'Линейная регрессия — предсказание непрерывной переменной. y = wx + b. Метод наименьших квадратов минимизирует ошибку. Градиентный спуск — оптимизация параметров. Метрики: MSE, MAE, R². Множественная регрессия — несколько признаков. Регуляризация: L1 (Lasso), L2 (Ridge).',
          practice: 'Реализуйте линейную регрессию для предсказания цены квартиры.'
        },
        {
          title: 'Классификация',
          content: 'Классификация — предсказание категориальной переменной. Логистическая регрессия: вероятность класса. Decision trees — деревья решений. Random Forest — ансамбль деревьев. SVM — метод опорных векторов. Метрики: accuracy, precision, recall, F1-score. ROC-кривая и AUC.',
          practice: 'Постройте классификатор для определения спама.'
        },
        {
          title: 'Кластеризация',
          content: 'Кластеризация — группировка похожих объектов без меток. K-means — разбиение на K кластеров. Иерархическая кластеризация. DBSCAN — кластеризация на основе плотности. Метрики: силуэт, инерция. Понижение размерности: PCA, t-SNE. Визуализация результатов кластеризации.',
          practice: 'Примените K-means для сегментации клиентов магазина.'
        }
      ]
    },
    {
      title: 'Безопасность',
      lessons: [
        {
          title: 'SQL-инъекции',
          content: 'SQL-инъекция — внедрение вредоносного SQL-кода. Причина: конкатенация строк с пользовательским вводом. Пример: " OR "1"="1. Параметризованные запросы предотвращают инъекции. ORM автоматически экранируют параметры. Валидация ввода — дополнительная защита. OWASP Top 10 — основные уязвимости.',
          practice: 'Покажите пример SQL-инъекции и как её предотвратить.'
        },
        {
          title: 'XSS и CSRF',
          content: 'XSS (Cross-Site Scripting) — внедрение JavaScript. Хранение вредоносных скриптов в базе. Кража cookies, перенаправление, фишинг. Защита: экранирование вывода, Content Security Policy. CSRF (Cross-Site Request Forgery) — подделка запроса. Защита: CSRF-токены, SameSite cookies.',
          practice: 'Объясните разницу между XSS и CSRF.'
        },
        {
          title: 'Хеширование паролей',
          content: 'Пароли нельзя хранить в открытом виде. Хеширование необратимо. MD5 и SHA-1 устарели. bcrypt, scrypt, Argon2 — современные алгоритмы. Salt — случайная добавка для уникальности хешей. Медленные алгоритмы затрудняют перебор. Переход на более надёжные алгоритмы.',
          practice: 'Реализуйте хеширование паролей с bcrypt.'
        },
        {
          title: 'HTTPS и сертификаты',
          content: 'HTTPS шифрует трафик между клиентом и сервером. TLS/SSL — протоколы шифрования. Симметричное и асимметричное шифрование. Цифровые сертификаты подтверждают подлинность. CA — центры сертификации. Let\'s Encrypt — бесплатные сертификаты. HSTS — принудительное использование HTTPS.',
          practice: 'Настройте HTTPS для локального веб-сервера.'
        }
      ]
    },
    {
      title: 'Архитектура ПО',
      lessons: [
        {
          title: 'Принципы SOLID',
          content: 'S — Single Responsibility: один класс — одна ответственность. O — Open/Closed: открыт для расширения, закрыт для изменения. L — Liskov Substitution: подклассы могут заменять базовые. I — Interface Segregation: много маленьких интерфейсов лучше одного большого. D — Dependency Inversion: зависимость от абстракций, а не реализаций.',
          practice: 'Рефакторинг кода, нарушающего принципы SOLID.'
        },
        {
          title: 'Паттерны проектирования',
          content: 'Порождающие: Singleton, Factory, Builder, Prototype. Структурные: Adapter, Decorator, Facade, Proxy. Поведенческие: Observer, Strategy, Command, Iterator. Паттерны — типовые решения типовых проблем. Антипаттерны — типовые ошибки. Выбор паттерна зависит от контекста.',
          practice: 'Реализуйте паттерн Observer для системы уведомлений.'
        },
        {
          title: 'Микросервисная архитектура',
          content: 'Монолит vs микросервисы. Микросервис — маленький независимый сервис. API Gateway — единая точка входа. Service Discovery — поиск сервисов. Контейнеры Docker для изоляции. Kubernetes для оркестрации. Преимущества: масштабируемость, независимый деплой. Недостатки: сложность, сетевые задержки.',
          practice: 'Спроектируйте микросервисную архитектуру для интернет-магазина.'
        },
        {
          title: 'CI/CD и DevOps',
          content: 'CI (Continuous Integration) — частая интеграция кода. Автоматические тесты при каждом коммите. CD (Continuous Delivery/Deployment) — автоматический деплой. Инструменты: Jenkins, GitHub Actions, GitLab CI. Контейнеризация: Docker. Инфраструктура как код: Terraform, Ansible. Мониторинг: Prometheus, Grafana.',
          practice: 'Настройте GitHub Actions для автоматического тестирования.'
        }
      ]
    },
    {
      title: 'Итоговый проект',
      lessons: [
        {
          title: 'Проектирование проекта',
          content: 'Определение требований и целей проекта. Выбор стека технологий. Проектирование архитектуры. Создание диаграмм: UML, ERD, API. Планирование спринтов. Оценка времени и ресурсов. Документирование решений.',
          practice: 'Создайте техническое задание для вашего проекта.'
        },
        {
          title: 'Разработка MVP',
          content: 'MVP (Minimum Viable Product) — минимальный жизнеспособный продукт. Фокус на ключевой функциональности. Итеративная разработка. Регулярные ревью и корректировки. Написание кода и тестов одновременно. Рефакторинг по необходимости.',
          practice: 'Разработайте MVP вашего проекта за неделю.'
        },
        {
          title: 'Тестирование и отладка',
          content: 'Unit-тесты — проверка отдельных компонентов. Интеграционные тесты — проверка взаимодействия. E2E-тесты — проверка пользовательских сценариев. Нагрузочное тестирование. Отладка и исправление багов. Code review с другими разработчиками.',
          practice: 'Напишите тесты для критических частей вашего проекта.'
        },
        {
          title: 'Деплой и презентация',
          content: 'Подготовка к деплою: конфигурация, переменные окружения. Выбор хостинга: VPS, PaaS, облачные сервисы. Настройка домена и HTTPS. Мониторинг и логирование. Презентация проекта: демо, объяснение решений. Планы развития проекта.',
          practice: 'Задеплойте проект и подготовьте презентацию.'
        }
      ]
    }
  ]
}

const games: GameLesson[] = [
  {
    id: 'coding-10-quiz',
    title: 'Викторина по программированию',
    type: 'quiz',
    questions: [
      {
        question: 'Какой принцип SOLID требует зависимости от абстракций?',
        options: ['Single Responsibility', 'Open/Closed', 'Liskov Substitution', 'Dependency Inversion'],
        correctAnswer: 3
      },
      {
        question: 'Какой алгоритм находит кратчайший путь во взвешенном графе?',
        options: ['DFS', 'BFS', 'Дейкстры', 'Краскала'],
        correctAnswer: 2
      },
      {
        question: 'Что такое ORM?',
        options: ['Объектно-реляционное отображение', 'Операционная система', 'Протокол передачи данных', 'Язык программирования'],
        correctAnswer: 0
      },
      {
        question: 'Какой HTTP-метод используется для создания ресурса?',
        options: ['GET', 'POST', 'PUT', 'DELETE'],
        correctAnswer: 1
      },
      {
        question: 'Какой алгоритм хеширования рекомендуется для паролей?',
        options: ['MD5', 'SHA-1', 'bcrypt', 'CRC32'],
        correctAnswer: 2
      }
    ]
  },
  {
    id: 'coding-10-fill',
    title: 'Заполни пропуски',
    type: 'fill',
    exercises: [
      {
        text: 'Ключевое слово ___ создаёт асинхронную функцию.',
        answer: 'async'
      },
      {
        text: 'ORM расшифровывается как объектно-реляционное ___.',
        answer: 'отображение'
      },
      {
        text: 'SQL-инъекция предотвращается ___ запросами.',
        answer: 'параметризованными'
      },
      {
        text: 'CAP-теорема: согласованность, доступность, устойчивость к ___.',
        answer: 'разделению'
      }
    ]
  },
  {
    id: 'coding-10-order',
    title: 'Расставь по порядку',
    type: 'order',
    exercises: [
      {
        items: ['listen()', 'socket()', 'bind()', 'accept()'],
        correctOrder: [1, 2, 0, 3]
      },
      {
        items: ['training', 'preprocessing', 'evaluation', 'data collection'],
        correctOrder: [3, 1, 0, 2]
      }
    ]
  }
]

export { lessons, games }
